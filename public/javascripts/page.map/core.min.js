var mapincGoogleMap = []
var mapincColorMain1 = '#00AFEF'
var mapincColorMain2 = '#91D8F7'
var storageName = 'mapinc.storage'

function guidGenerator(){
  var S4 = function(){
    return (((1+Math.random())*0x10000)|0).toString(16).substring(1)
  }
  return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4())
}

function initMap(){
  var map = $(".google-map > .map-block")
  map.each(function(){
    if(!$(this).attr("id"))
      $(this).attr("id", guidGenerator())
    var mapCanvas = document.getElementById($(this).attr("id"))
    var mapOptions = {
      center: new google.maps.LatLng(-6.218096, 106.802711),
      panControl: false,
      zoomControl: true,
      mapTypeControl: false,
      scaleControl: false,
      streetViewControl: false,
      overviewMapControl: false,
      rotateControl: false,
      zoom: 15
    }
    mapincGoogleMap[`${$(this).attr("id")}`] = new google.maps.Map(mapCanvas, mapOptions)
  })
}

function initInput(){
  $.each($(".input-group.transparent .form-control, .form-control.transparent"), function(){
    $(this).on("change", function(){
      if(!_.isEmpty($(this).val().trim())) $(this).addClass("filled")
      else $(this).removeClass("filled")
    })
  })
}

function doSignout(){
  localStorage.removeItem(storageName)
  window.location.href = 'p.signin.html'
}

function initPage(){
  $(".nano").each(function(){
    $(this).nanoScroller()
  })
  $(".modal.vertical-align > .wrapper-outer > .wrapper-inner").on("click", function(e){
    if(e.target != this) return
    $(this).closest(".modal").modal("hide")
  })
  $("body").animate({
    opacity: 1
  }, 200)
}

function verify(callback, condition, redirect = false){
  initPage()
  callback
}

$(function(){
  initInput()
})
